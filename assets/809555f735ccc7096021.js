(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{471:function(t,e,n){"use strict";n.r(e);n(324),n(47);var r=n(9),o=n(467),c=n(473),l=n(328),f=n(44),m=n(431),d=n(271),h={signInSuccessUrl:"/",signInOptions:[d.auth.GoogleAuthProvider.PROVIDER_ID],credentialHelper:m.a.CredentialHelper.GOOGLE_YOLO},v={name:"Login",data:function(){return{user:null}},mounted:function(){new m.a.AuthUI(d.auth()).start("#firebaseui-auth-container",h)}},_=n(33),S=Object(_.a)(v,function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"firebaseui-auth-container"}})},[],!1,null,"7095d21a",null).exports,L=n(439),C=n(440);d.initializeApp({apiKey:"AIzaSyDS3BPrM8w3cZTmYMgzazsukpP979ELvOw",authDomain:"blj4-a0e08.firebaseapp.com"});var O=null,w=function(){function t(){Object(L.a)(this,t)}return Object(C.a)(t,null,[{key:"subscribeUserState",value:function(t){O&&O(),O=d.auth().onAuthStateChanged(function(e){return t.commit("setUser",e)})}}]),t}(),I=n(441),k=n.n(I);function x(t){var e,n,r=(e=(new Date).toGMTString(),(n=new k.a("SHA-1","TEXT")).setHMACKey("rUFMgXbOnss_Q2m6Gf1aNNVsyCc","TEXT"),n.update("x-date: "+e),{Authorization:'hmac username="3d37e7f9f56447f3b360b3482741d1a4", algorithm="hmac-sha1", headers="x-date", signature="'+n.getHMAC("B64")+'"',"X-Date":e});return t.get("https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/InterCity/1088?$filter=".concat("StopID%20eq%20'290710'%20or%20StopID%20eq%20'300865'","&$top=4&$format=JSON"),{headers:r})}var T,A,D=Object(o.a)(1e3),y=Object(c.a)(1500),V={components:{Login:S},filters:{stopCount:function(t){return t||"?"}},data:function(){return{afterLoadSec:0,go:{EstimateTime:null,StopName:{}},back:{EstimateTime:null,StopName:{}},goLoading:!1,backLoading:!1}},computed:Object(f.b)({user:function(t){return t.user}}),beforeCreate:function(){w.subscribeUserState(this.$store)},mounted:function(){this.fetchApi(0)},destroyed:function(){T.unsubscribe()},methods:{fetchApi:(A=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return 0===e?this.goLoading=!0:this.backLoading=!0,t.next=3,x(this.$axios);case 3:n=t.sent,r=n.data,this.go=r.find(function(t){return"290710"===t.StopID&&0===t.Direction}),this.back=r.find(function(t){return"300865"===t.StopID&&0===t.Direction}),y.subscribe(function(){o.goLoading=!1,o.backLoading=!1}),T&&T.unsubscribe(),T=D.subscribe(function(){return o.afterLoadSec++});case 10:case"end":return t.stop()}},t,this)})),function(t){return A.apply(this,arguments)}),lessTime:function(t){var e=Object(l.addSeconds)(null,t-this.afterLoadSec);return t?t-this.afterLoadSec<60?"即將進站":"".concat(Object(l.format)(e,"m"),"分"):"未發車或已過站"}}},j=n(62),E=n.n(j),M=n(472),N=n(468),$=n(323),U=n(469),z=n(316),G=n(274),H=n(252),P=n(273),R=n(470),X=Object(_.a)(V,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[n("v-card",{staticClass:"mx-auto amber lighten-3",staticStyle:{background:"transparent"},attrs:{tile:""}},[n("v-subheader",[n("span",{staticClass:"red--text"},[t._v("剩餘到站時間")])]),t._v(" "),n("v-list",{staticClass:"deep-orange blue-grey lighten-5",attrs:{shaped:""}},[n("v-list-item",[n("v-list-item-icon",{on:{click:function(e){return t.fetchApi(0)}}},[t.goLoading?n("v-icon",{staticClass:"red--text"},[t._v("\n              fas fa-circle-notch fa-spin\n            ")]):n("v-icon",{staticClass:"green--text"},[t._v("\n              mdi-reload\n            ")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.lessTime(t.go.EstimateTime)))]),t._v(" "),n("v-list-item-subtitle",[t._v("\n              還有 "+t._s(t._f("stopCount")(t.go.StopCountDown))+" 站到 "+t._s(t.go.StopName.Zh_tw)+"\n            ")])],1)],1),t._v(" "),n("v-list-item",[n("v-list-item-icon",{on:{click:function(e){return t.fetchApi(1)}}},[t.backLoading?n("v-icon",{staticClass:"red--text"},[t._v("\n              fas fa-circle-notch fa-spin\n            ")]):n("v-icon",{staticClass:"green--text"},[t._v("\n              mdi-reload\n            ")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.lessTime(t.back.EstimateTime)))]),t._v(" "),n("v-list-item-subtitle",[t._v("\n              還有 "+t._s(t._f("stopCount")(t.back.StopCountDown))+" 站到 "+t._s(t.back.StopName.Zh_tw)+"\n            ")])],1)],1)],1)],1)],1)],1):n("login")},[],!1,null,null,null);e.default=X.exports;E()(X,{VCard:M.a,VFlex:N.a,VIcon:$.a,VLayout:U.a,VList:z.a,VListItem:G.a,VListItemContent:H.a,VListItemIcon:P.a,VListItemSubtitle:H.b,VListItemTitle:H.c,VSubheader:R.a})}}]);